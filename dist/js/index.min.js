"use strict";!function(){$(function(){$.each($(".site__menu"),function(){new n($(this))}),$.each($(".language"),function(){new e($(this))})});var e=function(e){var n,o,s=e,i=$(".language__dropdown"),t=$(".language__item"),a=200,c=function(){t.on({click:function(e){$(this).parent().hasClass("language__active")&&e.preventDefault(),$(this).parent().hasClass("language__dropdown")&&($(".language__active .language__item").appendTo(i),$(this).appendTo(".language__active"),i.stop(!0,!0).slideUp(a))}}),s.on({mouseenter:function(){clearTimeout(o),n=setTimeout(function(){i.stop(!0,!0).slideDown(a)},200)}}),s.on({mouseleave:function(){clearTimeout(n),o=setTimeout(function(){i.is(":visible")&&i.stop(!0,!0).slideUp(a)},200)}})},l=function(){c()};l()},n=function(e){var n=this,o=e,s=$("body"),i=$(window),t=$(".site__menu-btn"),a=function(){t.on({click:function(){l($(this))}}),i.on({resize:function(){u()},scroll:function(){c()}})},c=function(){var e=i.scrollTop(),n=$(".site__hero").innerHeight();e>n?t.hasClass("active")||t.addClass("active"):t.removeClass("active")},l=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),o.removeClass("opened"),s.css({overflow:"visible"})):(n.addClass("opened"),o.addClass("opened"),s.css({overflow:"hidden"}))},u=function(){t.removeClass("opened"),o.removeAttr("style"),s.css({overflow:"visible"})},r=function(){o[0].obj=n,a()};r()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var p=this,n=40,t=$(".popup__open"),e=o,i=e.find(".popup__close, .popup__cancel"),s=e.find(".popup__wrap"),c=e.find(".popup__content"),u=$("html"),a=$(window),d=setTimeout(function(){},1),r=function(){a.height()-2*n-s.height()>0?s.css({top:(a.height()-2*n-s.height())/2}):s.css({top:0})},l=function(){var o,p=document.createElement("div");return p.className="popup__scrollbar-measure",document.body.appendChild(p),o=p.offsetWidth-p.clientWidth,document.body.removeChild(p),o},_=function(){e.css({overflowY:"hidden"}),u.css({overflowY:"auto",paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),s.hasClass("popup__wrap_top")&&s.removeClass("popup__wrap_top"),d=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},300)},f=function(){e[0].obj=p,h()},h=function(){a.on({resize:function(){r()}}),t.on({click:function(){return m($(this).attr("data-popup")),$(this).hasClass("popup__open_top")&&s.addClass("popup__wrap_top"),!1}}),s.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return _(),!1}}),i.on({click:function(){return _(),!1}})},m=function(o){v(o),u.css({overflowY:"hidden",paddingRight:l()}),e.addClass("popup_opened"),r()},v=function(o){var p=c.filter(".popup__"+o);c.css({display:"none"}),p.css({display:"block"})};f()}}();
!function(){"use strict";$(function(){$.each($(".slides"),function(){new n($(this))})});var n=function(n){var i=this,t=n,o=$(window),s=function(){o.on({scroll:function(){a()}})},a=function(){var n=o.height();t.each(function(){var i=$(this),s=t.offset().top;o.scrollTop()>s-n/1.8&&!i.hasClass("animation")&&i.addClass("animation")})},c=function(){t[0].slides=i,s(),a()};c()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAvanMvanF1ZXJ5Lm1haW4uanMiLCIvYXBwL2pzL2pxdWVyeS5wb3B1cC5qcyIsIi9hcHAvanMvanF1ZXJ5LmFuaW1hdGlvbi5qcyJdLCJuYW1lcyI6WyIkIiwiZWFjaCIsIk1lbnUiLCJ0aGlzIiwiTGFuZ3VhZ2UiLCJvYmoiLCJfbW91c2VlbnRlclRpbWVvdXQiLCJfbW91c2VsZWF2ZVRpbWVvdXQiLCJfb2JqIiwiX2xhbmd1YWdlc0Ryb3BEb3duIiwiX2xhbmd1YWdlc0l0ZW0iLCJfbGFuZ3VhZ2VzRHJvcERvd25TcGVlZCIsIl9hZGRFdmVudHMiLCJvbiIsImNsaWNrIiwiZSIsInBhcmVudCIsImhhc0NsYXNzIiwicHJldmVudERlZmF1bHQiLCJhcHBlbmRUbyIsInN0b3AiLCJzbGlkZVVwIiwibW91c2VlbnRlciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzbGlkZURvd24iLCJtb3VzZWxlYXZlIiwiaXMiLCJfaW5pdCIsIl9zZWxmIiwiX21lbnUiLCJfYm9keSIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfc2hvd0J0biIsIl9vbkV2ZW50cyIsIl9vcGVuTWVudSIsInJlc2l6ZSIsIl9yZXNldFN0eWxlIiwic2Nyb2xsIiwiX2NoZWNrU2Nyb2xsIiwid2luZG93U2Nyb2xsIiwic2Nyb2xsVG9wIiwiaGVyb0hlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImVsZW0iLCJjdXJJdGVtIiwiY3NzIiwib3ZlcmZsb3ciLCJyZW1vdmVBdHRyIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJmaW5kIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3RpbWVyIiwiX2NlbnRlcldyYXAiLCJoZWlnaHQiLCJ0b3AiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxCYXJXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsIl9oaWRlIiwib3ZlcmZsb3dZIiwicGFkZGluZ1JpZ2h0IiwiX3Nob3ciLCJhdHRyIiwic3RvcFByb3BhZ2F0aW9uIiwiX3NldFBvcHVwQ29udGVudCIsImN1ckNvbnRlbnQiLCJmaWx0ZXIiLCJkaXNwbGF5IiwiU2xpZGVzIiwid2luZG93SCIsInRvcFBvcyIsIm9mZnNldCIsInNsaWRlcyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FDQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUVDLEtBQU1ELEVBQUcsZUFBaUIsV0FFeEIsR0FBSUUsR0FBT0YsRUFBR0csU0FJbEJILEVBQUVDLEtBQU1ELEVBQUcsYUFBZSxXQUV0QixHQUFJSSxHQUFXSixFQUFFRyxVQU16QixJQUFJQyxHQUFXLFNBQVVDLEdBR3JCLEdBSUlDLEdBQ0FDLEVBTEFDLEVBQU9ILEVBQ1BJLEVBQXFCVCxFQUFHLHVCQUN4QlUsRUFBaUJWLEVBQUcsbUJBQ3BCVyxFQUEwQixJQUsxQkMsRUFBYSxXQUVURixFQUFlRyxJQUNYQyxNQUFPLFNBQVdDLEdBRVZmLEVBQUdHLE1BQU9hLFNBQVNDLFNBQVUscUJBRTdCRixFQUFFRyxpQkFJRmxCLEVBQUdHLE1BQU9hLFNBQVNDLFNBQVUsd0JBRTdCakIsRUFBRyxxQ0FBc0NtQixTQUFVVixHQUVuRFQsRUFBR0csTUFBT2dCLFNBQVUscUJBRXBCVixFQUFtQlcsTUFBTSxHQUFNLEdBQU9DLFFBQVNWLE9BTTNESCxFQUFLSyxJQUNEUyxXQUFZLFdBQ1JDLGFBQWNoQixHQUVkRCxFQUFxQmtCLFdBQVksV0FFN0JmLEVBQW1CVyxNQUFNLEdBQU0sR0FBT0ssVUFBV2QsSUFFbEQsUUFJWEgsRUFBS0ssSUFDRGEsV0FBWSxXQUVSSCxhQUFjakIsR0FFZEMsRUFBcUJpQixXQUFZLFdBRTFCZixFQUFtQmtCLEdBQUksYUFFdEJsQixFQUFtQlcsTUFBTSxHQUFNLEdBQU9DLFFBQVNW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LEtBR2ZwQixFQUFVMUMsSUFDTkMsTUFBTyxXQUVILE1BREE2RCxNQUNPLE1BSW5CRyxFQUFRLFNBQVVULEdBQ2RZLEVBQWtCWixHQUVsQlYsRUFBaUJWLEtBQ2IyQixVQUFXLFNBQ1hDLGFBQWNiLE1BRWxCeEQsRUFBS3FDLFNBQVUsZ0JBQ2ZnQixLQUdKb0IsRUFBbUIsU0FBVVosR0FDekIsR0FBSWEsR0FBYXhCLEVBQVV5QixPQUFRLFdBQWFkLEVBRWhEWCxHQUFVVCxLQUFPbUMsUUFBUyxTQUMxQkYsRUFBV2pDLEtBQU9tQyxRQUFTLFVBUW5DeEQ7Q0NwSVIsV0FDSSxZQUVBNUIsR0FBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLFdBQWEsV0FDcEIsR0FBSXFGLEdBQVNyRixFQUFHRyxVQUt4QixJQUFJa0YsR0FBUyxTQUFXaEYsR0FHcEIsR0FBSXdCLEdBQVExQixLQUNSSyxFQUFPSCxFQUNQMkIsRUFBVWhDLEVBQUdpQyxRQUdiRSxFQUFZLFdBQ1JILEVBQVFuQixJQUNKMEIsT0FBUSxXQUVKQyxRQUtaQSxFQUFlLFdBRVgsR0FBSThDLEdBQVV0RCxFQUFROEIsUUFFdEJ0RCxHQUFLUCxLQUFLLFdBRU4sR0FBSStDLEdBQVVoRCxFQUFFRyxNQUNab0YsRUFBUy9FLEVBQUtnRixTQUFTekIsR0FFdkIvQixHQUFRVSxZQUFlNkMsRUFBU0QsRUFBUSxNQUFTdEMsRUFBUS9CLFNBQVUsY0FFbkUrQixFQUFRSCxTQUFVLGdCQUs5QmpCLEVBQVEsV0FDSnBCLEVBQUssR0FBR2lGLE9BQVM1RCxFQUNqQk0sSUFDQUssSUFPUloiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbiggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5zaXRlX19tZW51JyApLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBNZW51ICggJCggdGhpcyApICk7XHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLmxhbmd1YWdlJyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IExhbmd1YWdlICggJCh0aGlzKSApXHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgTGFuZ3VhZ2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9sYW5ndWFnZXNEcm9wRG93biA9ICQoICcubGFuZ3VhZ2VfX2Ryb3Bkb3duJyApLFxyXG4gICAgICAgICAgICBfbGFuZ3VhZ2VzSXRlbSA9ICQoICcubGFuZ3VhZ2VfX2l0ZW0nICksXHJcbiAgICAgICAgICAgIF9sYW5ndWFnZXNEcm9wRG93blNwZWVkID0gMjAwLFxyXG4gICAgICAgICAgICBfbW91c2VlbnRlclRpbWVvdXQsXHJcbiAgICAgICAgICAgIF9tb3VzZWxlYXZlVGltZW91dDtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGFuZ3VhZ2VzSXRlbS5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICggZSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkucGFyZW50KCkuaGFzQ2xhc3MoICdsYW5ndWFnZV9fYWN0aXZlJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkucGFyZW50KCkuaGFzQ2xhc3MoICdsYW5ndWFnZV9fZHJvcGRvd24nICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggJy5sYW5ndWFnZV9fYWN0aXZlIC5sYW5ndWFnZV9faXRlbScgKS5hcHBlbmRUbyggX2xhbmd1YWdlc0Ryb3BEb3duICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmFwcGVuZFRvKCAnLmxhbmd1YWdlX19hY3RpdmUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xhbmd1YWdlc0Ryb3BEb3duLnN0b3AoIHRydWUsIHRydWUgKS5zbGlkZVVwKCBfbGFuZ3VhZ2VzRHJvcERvd25TcGVlZCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCBfbW91c2VsZWF2ZVRpbWVvdXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tb3VzZWVudGVyVGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sYW5ndWFnZXNEcm9wRG93bi5zdG9wKCB0cnVlLCB0cnVlICkuc2xpZGVEb3duKCBfbGFuZ3VhZ2VzRHJvcERvd25TcGVlZCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoIF9tb3VzZWVudGVyVGltZW91dCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX21vdXNlbGVhdmVUaW1lb3V0ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoX2xhbmd1YWdlc0Ryb3BEb3duLmlzKCAnOnZpc2libGUnICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sYW5ndWFnZXNEcm9wRG93bi5zdG9wKCB0cnVlLCB0cnVlICkuc2xpZGVVcCggX2xhbmd1YWdlc0Ryb3BEb3duU3BlZWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gX25ld1Rlc3QgPSBmdW5jdGlvbiAoIHllYXIsIHN0YXJ0LCBmaW5pc2ggKSB7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgc3RhcnRNb250aCA9IHN0YXJ0LFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHN0YXJ0WWVhciA9IHllYXIsXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3RhcnRQb2ludCA9IG5ldyBEYXRlKCBzdGFydFllYXIsIHN0YXJ0TW9udGgsIDEgKSxcclxuICAgICAgICAgICAgLy8gICAgICAgICBzdGFydERheSA9IHN0YXJ0UG9pbnQuZ2V0RGF5KCksXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgZmluaXNoTW9udGggPSBmaW5pc2ggKyAxLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGZpbmlzaFllYXIgPSB5ZWFyLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIGZpbmlzaFBvaW50ID0gbmV3IERhdGUoIGZpbmlzaFllYXIsIGZpbmlzaE1vbnRoLCAxICksXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgZGF5cyA9IChmaW5pc2hQb2ludCAtIHN0YXJ0UG9pbnQpLyggMTAwMCo2MCo2MCoyNCApLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHN1bmRheSA9IDA7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhzdGFydFBvaW50LCBmaW5pc2hQb2ludCk7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAvLyBmaW5pc2hQb2ludC5zZXREYXRlKCBmaW5pc2hQb2ludC5nZXREYXRlKCkgLSAxICk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmluZm8oZmluaXNoUG9pbnQpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCBzdGFydERheSAhPT0gMSApIHtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnc3RhcnREYXkgIT09IDEnLCBzdGFydERheSk7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgc3dpdGNoICggc3RhcnREYXkgKXtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgc3RhcnRQb2ludC5zZXREYXRlKCBzdGFydFBvaW50LmdldERhdGUoKSArIDEgKTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcwJyxzdGFydFBvaW50LmdldERheSgpKTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBzdGFydFBvaW50LnNldERhdGUoIHN0YXJ0UG9pbnQuZ2V0RGF0ZSgpICsgNiApO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzInLHN0YXJ0UG9pbnQuZ2V0RGF5KCkpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQuc2V0RGF0ZSggc3RhcnRQb2ludC5nZXREYXRlKCkgKyA1ICk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnMycsc3RhcnRQb2ludC5nZXREYXkoKSk7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgc3RhcnRQb2ludC5zZXREYXRlKCBzdGFydFBvaW50LmdldERhdGUoKSArIDQgKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc0JyxzdGFydFBvaW50LmdldERheSgpKTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBzdGFydFBvaW50LnNldERhdGUoIHN0YXJ0UG9pbnQuZ2V0RGF0ZSgpICsgMyApO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJzQnLHN0YXJ0UG9pbnQuZ2V0RGF5KCkpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQuc2V0RGF0ZSggc3RhcnRQb2ludC5nZXREYXRlKCkgKyAyICk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnNCcsc3RhcnRQb2ludC5nZXREYXkoKSk7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBkYXlzOyBpKysgKXtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICB2YXIgY3VyRGF5ID0gc3RhcnRQb2ludC5nZXREYXkoKTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhjdXJEYXksIGkpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICggY3VyRGF5ID09IDAgKSB7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIHN1bmRheSsrXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHN0YXJ0UG9pbnQuc2V0RGF0ZSggc3RhcnRQb2ludC5nZXREYXRlKCkgKyAxIClcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUuZXJyb3Ioc3VuZGF5KTtcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gfSxcclxuXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gX25ld1Rlc3QoIDIwMDQsIDEsIDIgKTtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX21lbnUgPSBvYmosXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX3Nob3dCdG4gPSAkKCAnLnNpdGVfX21lbnUtYnRuJyApO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSggJCggdGhpcyApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVzZXRTdHlsZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93U2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgICAgICBoZXJvSGVpZ2h0ID0gJCgnLnNpdGVfX2hlcm8nKS5pbm5lckhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggd2luZG93U2Nyb2xsID4gaGVyb0hlaWdodCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhX3Nob3dCdG4uaGFzQ2xhc3MoICdhY3RpdmUnICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvd0J0bi5hZGRDbGFzcygnYWN0aXZlJylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zaG93QnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCBlbGVtICkgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IGVsZW07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0ucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX21lbnUucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcyggJ29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICBfbWVudS5hZGRDbGFzcyggJ29wZW5lZCcgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2JvZHkuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Jlc2V0U3R5bGUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2hvd0J0bi5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9tZW51LnJlbW92ZUF0dHIoICdzdHlsZScgKTtcclxuICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICd2aXNpYmxlJ1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF9tZW51WyAwIF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG59ICkoKTtcclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX3BvcHVwUGFkZGluZyA9IDQwLFxyXG4gICAgICAgICAgICBfYnRuU2hvdyA9ICAkKCAnLnBvcHVwX19vcGVuJyApLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuQ2xvc2UgPSBfb2JqLmZpbmQoICcucG9wdXBfX2Nsb3NlLCAucG9wdXBfX2NhbmNlbCcgKSxcclxuICAgICAgICAgICAgX3dyYXAgPSBfb2JqLmZpbmQoICcucG9wdXBfX3dyYXAnICksXHJcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcclxuICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lciA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfY2VudGVyV3JhcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogKCAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgKSAtIF93cmFwLmhlaWdodCgpICkgLyAyIH0gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gJ3BvcHVwX19zY3JvbGxiYXItbWVhc3VyZSc7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2hpZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29iai5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuICAgICAgICAgICAgICAgIGlmICggX3dyYXAuaGFzQ2xhc3MoICdwb3B1cF9fd3JhcF90b3AnICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAucmVtb3ZlQ2xhc3MoICdwb3B1cF9fd3JhcF90b3AnIClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdwb3B1cF9fb3Blbl90b3AnICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3BvcHVwX193cmFwX3RvcCcgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcclxuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xyXG4gICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyQ29udGVudCA9IF9jb250ZW50cy5maWx0ZXIoICcucG9wdXBfXycgKyBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XHJcbiAgICAgICAgICAgICAgICBjdXJDb250ZW50LmNzcyggeyBkaXNwbGF5OiAnYmxvY2snIH0gKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxufSApKCk7XHJcblxyXG4iLCJcclxuKCBmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuc2xpZGVzJyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IFNsaWRlcyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgU2xpZGVzID0gZnVuY3Rpb24gKCBvYmogKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NoZWNrU2Nyb2xsID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93SCA9IF93aW5kb3cuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BQb3MgPSBfb2JqLm9mZnNldCgpLnRvcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPiAodG9wUG9zIC0gd2luZG93SC8xLjgpICYmICFjdXJJdGVtLmhhc0NsYXNzKCAnYW5pbWF0aW9uJyApICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCAnYW5pbWF0aW9uJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9vYmpbMF0uc2xpZGVzID0gX3NlbGY7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG59ICkoKTtcclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
