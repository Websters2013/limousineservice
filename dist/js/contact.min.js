"use strict";!function(){$(function(){$.each($(".site__menu"),function(){new n($(this))}),$.each($(".language"),function(){new e($(this))})});var e=function(e){var n,o,i=e,s=$(".language__dropdown"),t=$(".language__item"),a=200,c=($(window),function(){t.on({click:function(e){$(this).parent().hasClass("language__active")&&(i.trigger("mouseenter"),e.preventDefault()),$(this).parent().hasClass("language__dropdown")&&($(".language__active .language__item").appendTo(s),$(this).appendTo(".language__active"),s.stop(!0,!0).slideUp(a))}}),i.on({mouseenter:function(){clearTimeout(o),n=setTimeout(function(){s.stop(!0,!0).slideDown(a)},200)}}),i.on({mouseleave:function(){clearTimeout(n),o=setTimeout(function(){s.is(":visible")&&s.stop(!0,!0).slideUp(a)},200)}})}),u=function(){c()};u()},n=function(e){var n=this,o=e,i=$("body"),s=$(window),t=$(".site__menu-btn"),a=function(){t.on({click:function(){u($(this))}}),s.on({resize:function(){l()},scroll:function(){c()}})},c=function(){var e=s.scrollTop(),n=$(".site__hero").innerHeight();e>n?t.hasClass("active")||t.addClass("active"):t.removeClass("active")},u=function(e){var n=e;n.hasClass("opened")?(n.removeClass("opened"),o.removeClass("opened"),i.css({overflow:"visible"})):(n.addClass("opened"),o.addClass("opened"),i.css({overflow:"hidden"}))},l=function(){t.removeClass("opened"),o.removeAttr("style"),i.css({overflow:"visible"})},r=function(){o[0].obj=n,a()};r()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),p=o,e=p.find(".popup__close, .popup__cancel"),c=p.find(".popup__wrap"),u=p.find(".popup__content"),a=$("html"),s=$(window),d=$(".popup__video"),r=setTimeout(function(){},1),l=function(){s.height()-2*t-c.height()>0?c.css({top:(s.height()-2*t-c.height())/2}):c.css({top:0})},f=function(o){d.append('<iframe src="'+o+'?autoplay=1" frameborder="0" allowfullscreen></iframe>')},h=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},_=function(){p.css({overflowY:"hidden"}),a.css({overflowY:"auto",paddingRight:0}),p.removeClass("popup_opened"),p.addClass("popup_hide"),r=setTimeout(function(){p.css({overflowY:"auto"}),p.removeClass("popup_hide")},300),u.hasClass("popup__video")&&d.find("iframe").remove()},m=function(){p[0].obj=n,v()},v=function(){s.on({resize:function(){l()}}),i.on({click:function(){return g($(this).attr("data-popup")),"video"==$(this).attr("data-popup")&&f($(this).attr("data-video")),"book"==$(this).attr("data-popup")&&($(".popup__book .booking")[0].list.initSwiper(),$(".autocomplete")[0].obj.initAutocomplite()),!1}}),u.on({click:function(o){o.stopPropagation()}}),p.on({click:function(){return _(),!1}}),e.on({click:function(){return _(),!1}})},g=function(o){b(o),console.log(o),a.css({overflowY:"hidden",paddingRight:h()}),p.addClass("popup_opened"),l()},b=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};m()}}();
!function(){"use strict";$(function(){$.each($(".slides"),function(){new n($(this))})});var n=function(n){var i=this,t=n,o=$(window),s=function(){o.on({scroll:function(){a()}})},a=function(){var n=o.height();t.each(function(){var i=$(this),s=t.offset().top;o.scrollTop()>s-n/1.3&&!i.hasClass("animation")&&i.addClass("animation")})},c=function(){t[0].slides=i,s(),a()};c()}}();
!function(){"use strict";$(function(){$.each($(".contact__map"),function(){new n($(this))})});var n=function(n){this.obj=n,this.mapWrap=this.obj;var o,t=this,e=[],a=null,i=function(){c(),l()},s=function(){var n={zoom:a.zoom,scrollwheel:!1};o=new google.maps.Map(t.mapWrap[0],n),g(o)},c=function(){$.getJSON("json/contact-map.json",{},function(n){a=n,google.maps.event.addDomListener(window,"load",s)})},l=function(){},g=function(n){for(var o=0;o<a.places.length;o++)m(o,n)},m=function(n,t){setTimeout(function(){var i=a.places[n],s=new google.maps.LatLng(i.lat,i.lng),c=new google.maps.LatLngBounds;e[n]=new google.maps.Marker({position:s,map:t,clickable:!1,icon:{url:i.icon,scaledSize:new google.maps.Size(i.size[0],i.size[1])},animation:google.maps.Animation.DROP});for(var l=0;l<e.length;l++)""!==e[l]&&c.extend(e[l].getPosition());o.fitBounds(c)},300*n)};i()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIiwianF1ZXJ5LmFuaW1hdGlvbi5qcyIsImpxdWVyeS5jb250YWN0LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiTWVudSIsInRoaXMiLCJMYW5ndWFnZSIsIm9iaiIsIl9tb3VzZWVudGVyVGltZW91dCIsIl9tb3VzZWxlYXZlVGltZW91dCIsIl9vYmoiLCJfbGFuZ3VhZ2VzRHJvcERvd24iLCJfbGFuZ3VhZ2VzSXRlbSIsIl9sYW5ndWFnZXNEcm9wRG93blNwZWVkIiwiX2FkZEV2ZW50cyIsIndpbmRvdyIsIm9uIiwiY2xpY2siLCJlIiwicGFyZW50IiwiaGFzQ2xhc3MiLCJ0cmlnZ2VyIiwicHJldmVudERlZmF1bHQiLCJhcHBlbmRUbyIsInN0b3AiLCJzbGlkZVVwIiwibW91c2VlbnRlciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzbGlkZURvd24iLCJtb3VzZWxlYXZlIiwiaXMiLCJfaW5pdCIsIl9zZWxmIiwiX21lbnUiLCJfYm9keSIsIl93aW5kb3ciLCJfc2hvd0J0biIsIl9vbkV2ZW50cyIsIl9vcGVuTWVudSIsInJlc2l6ZSIsIl9yZXNldFN0eWxlIiwic2Nyb2xsIiwiX2NoZWNrU2Nyb2xsIiwid2luZG93U2Nyb2xsIiwic2Nyb2xsVG9wIiwiaGVyb0hlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImVsZW0iLCJjdXJJdGVtIiwiY3NzIiwib3ZlcmZsb3ciLCJyZW1vdmVBdHRyIiwiUG9wdXAiLCJfcG9wdXBQYWRkaW5nIiwiX2J0blNob3ciLCJfYnRuQ2xvc2UiLCJmaW5kIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3ZpZGVvUG9wdXAiLCJfdGltZXIiLCJfY2VudGVyV3JhcCIsImhlaWdodCIsInRvcCIsIl9hZGRWaWRlb0ZyYW1lIiwidXJsIiwiYXBwZW5kIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJfaGlkZSIsIm92ZXJmbG93WSIsInBhZGRpbmdSaWdodCIsInJlbW92ZSIsIl9zaG93IiwiYXR0ciIsImxpc3QiLCJpbml0U3dpcGVyIiwiaW5pdEF1dG9jb21wbGl0ZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9zZXRQb3B1cENvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiLCJTbGlkZXMiLCJ3aW5kb3dIIiwidG9wUG9zIiwib2Zmc2V0Iiwic2xpZGVzIiwiTWFwIiwibWFwV3JhcCIsIl9tYXAiLCJfbWFya2VycyIsIl9kYXRhIiwiX2NvbnN0cnVjdG9yIiwiX2xvYWREYXRhIiwiX2luaXRNYXAiLCJtYXBPcHRpb25zIiwiem9vbSIsInNjcm9sbHdoZWVsIiwiZ29vZ2xlIiwibWFwcyIsIl9zZXRNYXJrZXJzIiwiZ2V0SlNPTiIsImRhdGEiLCJldmVudCIsImFkZERvbUxpc3RlbmVyIiwibWFwIiwiaiIsImxlbmd0aCIsIl9hZGRNYXJrZXIiLCJpIiwiY3VyTGF0TG5nIiwiTGF0TG5nIiwiYm91bmRzIiwiTGF0TG5nQm91bmRzIiwiTWFya2VyIiwicG9zaXRpb24iLCJjbGlja2FibGUiLCJpY29uIiwic2NhbGVkU2l6ZSIsIlNpemUiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwiZXh0ZW5kIiwiZ2V0UG9zaXRpb24iLCJmaXRCb3VuZHMiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLGVBQWlCLFdBRXhCLEdBQUlFLEdBQU9GLEVBQUdHLFNBSWxCSCxFQUFFQyxLQUFNRCxFQUFHLGFBQWUsV0FFdEIsR0FBSUksR0FBV0osRUFBRUcsVUFLekIsSUFBSUMs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V0FFUjNHLEVBQUVtSCxRQUFRLDJCQUE2QixTQUFVQyxHQUU3Q1gsRUFBUVcsRUFDUkosT0FBT0MsS0FBS0ksTUFBTUMsZUFBZXpHLE9BQVEsT0FBUStGLE1BSXpEeEUsRUFBWSxhQUlaOEUsRUFBYyxTQUFXSyxHQUVyQixJQUFLLEdBQUlDLEdBQUcsRUFBR0EsRUFBSWYsRUFBZ0IsT0FBRWdCLE9BQVFELElBRXpDRSxFQUFZRixFQUFHRCxJQUd2QkcsRUFBYSxTQUFXQyxFQUFHSixHQUV2QjdGLFdBQVcsV0FFUCxHQUFJdUIsR0FBVXdELEVBQWdCLE9BQUVrQixHQUM1QkMsRUFBWSxHQUFJWixRQUFPQyxLQUFLWSxPQUFRNUUsRUFBZSxJQUFHQSxFQUFlLEtBQ3JFNkUsRUFBUyxHQUFJZCxRQUFPQyxLQUFLYyxZQUU3QnZCLEdBQVVtQixHQUFNLEdBQUlYLFFBQU9DLEtBQUtlLFFBQzVCQyxTQUFVTCxFQUNWTCxJQUFLQSxFQUNMVyxXQUFXLEVBQ1hDLE1BQ0loRSxJQUFLbEIsRUFBZ0IsS0FDckJtRixXQUFZLEdBQUlwQixRQUFPQyxLQUFLb0IsS0FBTXBGLEVBQWdCLEtBQUcsR0FBS0EsRUFBZ0IsS0FBRyxLQUVqRnFGLFVBQVd0QixPQUFPQyxLQUFLc0IsVUFBVUMsTUFJckMsS0FBTSxHQUFJaEIsR0FBSSxFQUFHQSxFQUFJaEIsRUFBU2lCLE9BQVFELElBRVgsS0FBbEJoQixFQUFVZ0IsSUFDWE0sRUFBT1csT0FBUWpDLEVBQVVnQixHQUFJa0IsY0FJckNuQyxHQUFLb0MsVUFBV2IsSUFFYixJQUFKSCxHQUlYakIiLCJmaWxlIjoiY29udGFjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuKCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLnNpdGVfX21lbnUnICksIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcubGFuZ3VhZ2UnICksIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBuZXcgTGFuZ3VhZ2UgKCAkKHRoaXMpIClcclxuXHJcbiAgICAgICAgfSApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIExhbmd1YWdlID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfbGFuZ3VhZ2VzRHJvcERvd24gPSAkKCAnLmxhbmd1YWdlX19kcm9wZG93bicgKSxcclxuICAgICAgICAgICAgX2xhbmd1YWdlc0l0ZW0gPSAkKCAnLmxhbmd1YWdlX19pdGVtJyApLFxyXG4gICAgICAgICAgICBfbGFuZ3VhZ2VzRHJvcERvd25TcGVlZCA9IDIwMCxcclxuICAgICAgICAgICAgX21vdXNlZW50ZXJUaW1lb3V0LFxyXG4gICAgICAgICAgICBfbW91c2VsZWF2ZVRpbWVvdXQsXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGFuZ3VhZ2VzSXRlbS5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICggZSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCB0aGlzICkucGFyZW50KCkuaGFzQ2xhc3MoICdsYW5ndWFnZV9fYWN0aXZlJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoudHJpZ2dlcignbW91c2VlbnRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJCggdGhpcyApLnBhcmVudCgpLmhhc0NsYXNzKCAnbGFuZ3VhZ2VfX2Ryb3Bkb3duJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoICcubGFuZ3VhZ2VfX2FjdGl2ZSAubGFuZ3VhZ2VfX2l0ZW0nICkuYXBwZW5kVG8oIF9sYW5ndWFnZXNEcm9wRG93biApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIHRoaXMgKS5hcHBlbmRUbyggJy5sYW5ndWFnZV9fYWN0aXZlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sYW5ndWFnZXNEcm9wRG93bi5zdG9wKCB0cnVlLCB0cnVlICkuc2xpZGVVcCggX2xhbmd1YWdlc0Ryb3BEb3duU3BlZWQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCggX21vdXNlbGVhdmVUaW1lb3V0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbW91c2VlbnRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbGFuZ3VhZ2VzRHJvcERvd24uc3RvcCggdHJ1ZSwgdHJ1ZSApLnNsaWRlRG93biggX2xhbmd1YWdlc0Ryb3BEb3duU3BlZWQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2VsZWF2ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCBfbW91c2VlbnRlclRpbWVvdXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tb3VzZWxlYXZlVGltZW91dCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF9sYW5ndWFnZXNEcm9wRG93bi5pcyggJzp2aXNpYmxlJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbGFuZ3VhZ2VzRHJvcERvd24uc3RvcCggdHJ1ZSwgdHJ1ZSApLnNsaWRlVXAoIF9sYW5ndWFnZXNEcm9wRG93blNwZWVkICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9tZW51ID0gb2JqLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9zaG93QnRuID0gJCggJy5zaXRlX19tZW51LWJ0bicgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoICQoIHRoaXMgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc2V0U3R5bGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd1Njcm9sbCA9IF93aW5kb3cuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVyb0hlaWdodCA9ICQoJy5zaXRlX19oZXJvJykuaW5uZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHdpbmRvd1Njcm9sbCA+IGhlcm9IZWlnaHQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggIV9zaG93QnRuLmhhc0NsYXNzKCAnYWN0aXZlJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3dCdG4uYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfc2hvd0J0bi5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbiggZWxlbSApICB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBlbGVtO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9tZW51LnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfYm9keS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ3Zpc2libGUnXHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoICdvcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX21lbnUuYWRkQ2xhc3MoICdvcGVuZWQnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9yZXNldFN0eWxlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3Nob3dCdG4ucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICBfbWVudS5yZW1vdmVBdHRyKCAnc3R5bGUnICk7XHJcbiAgICAgICAgICAgICAgICBfYm9keS5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cnOiAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfbWVudVsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcbiIsIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkKCAnLnBvcHVwJyApLmVhY2goZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIG5ldyBQb3B1cCgkKHRoaXMpKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIFBvcHVwID0gZnVuY3Rpb24oIG9iaiApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcclxuICAgICAgICAgICAgX2J0blNob3cgPSAgJCggJy5wb3B1cF9fb3BlbicgKSxcclxuICAgICAgICAgICAgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXHJcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLnBvcHVwX193cmFwJyApLFxyXG4gICAgICAgICAgICBfY29udGVudHMgPSBfb2JqLmZpbmQoICcucG9wdXBfX2NvbnRlbnQnICksXHJcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxyXG4gICAgICAgICAgICBfdmlkZW9Qb3B1cCA9ICQoICcucG9wdXBfX3ZpZGVvJyApLFxyXG4gICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe30sIDEgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkVmlkZW9GcmFtZSA9IGZ1bmN0aW9uICggdXJsICkge1xyXG5cclxuICAgICAgICAgICAgICAgIF92aWRlb1BvcHVwLmFwcGVuZCggJzxpZnJhbWUgc3JjPVwiJyt1cmwrJz9hdXRvcGxheT0xXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicgKVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSAncG9wdXBfX3Njcm9sbGJhci1tZWFzdXJlJztcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBzY3JvbGxEaXYgKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX2hpZGUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5jc3MgKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9jb250ZW50cy5oYXNDbGFzcygncG9wdXBfX3ZpZGVvJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF92aWRlb1BvcHVwLmZpbmQoJ2lmcmFtZScpLnJlbW92ZSgpXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93KCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnICkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJykgPT0gJ3ZpZGVvJyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkVmlkZW9GcmFtZSggJCggdGhpcyApLmF0dHIoICdkYXRhLXZpZGVvJyApIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcG9wdXAnKSA9PSAnYm9vaycgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCAnLnBvcHVwX19ib29rIC5ib29raW5nJyApWzBdLmxpc3QuaW5pdFN3aXBlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggJy5hdXRvY29tcGxldGUnIClbMF0ub2JqLmluaXRBdXRvY29tcGxpdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9jb250ZW50cy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9idG5DbG9zZS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2hvdyA9IGZ1bmN0aW9uKCBjbGFzc05hbWUgKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50KCBjbGFzc05hbWUgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjbGFzc05hbWUpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xyXG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbn0gKSgpO1xyXG5cclxuIiwiXHJcbiggZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLnNsaWRlcycgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBTbGlkZXMgKCAkKCB0aGlzICkgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIFNsaWRlcyA9IGZ1bmN0aW9uICggb2JqICkge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jaGVja1Njcm9sbCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd0ggPSBfd2luZG93LmhlaWdodCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gX29iai5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID4gKHRvcFBvcyAtIHdpbmRvd0gvMS4zKSAmJiAhY3VySXRlbS5oYXNDbGFzcyggJ2FuaW1hdGlvbicgKSApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcyggJ2FuaW1hdGlvbicgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLnNsaWRlcyA9IF9zZWxmO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcblxyXG5cclxuXHJcblxyXG4iLCJcclxuKCBmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuY29udGFjdF9fbWFwJyApLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIG5ldyBNYXAgKCAkKCB0aGlzICkgKTtcclxuXHJcbiAgICAgICAgfSApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIE1hcCA9IGZ1bmN0aW9uICggb2JqICkge1xyXG5cclxuICAgICAgICB0aGlzLm9iaiA9IG9iajtcclxuICAgICAgICB0aGlzLm1hcFdyYXAgPSB0aGlzLm9iajtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfbWFwLFxyXG4gICAgICAgICAgICBfbWFya2VycyA9IFtdLFxyXG4gICAgICAgICAgICBfZGF0YSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9sb2FkRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0TWFwID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtYXBPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb206IF9kYXRhWyAnem9vbScgXSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgX21hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoIF9zZWxmLm1hcFdyYXBbMF0sIG1hcE9wdGlvbnMgKTtcclxuICAgICAgICAgICAgICAgIF9zZXRNYXJrZXJzKCBfbWFwICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfbG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5nZXRKU09OKCdqc29uL2NvbnRhY3QtbWFwLmpzb24nLCB7fSwgZnVuY3Rpb24oIGRhdGEgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgJ2xvYWQnLCBfaW5pdE1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0TWFya2VycyA9IGZ1bmN0aW9uICggbWFwICkge1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPTA7IGogPCBfZGF0YVsgJ3BsYWNlcycgXS5sZW5ndGg7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfYWRkTWFya2VyKCBqLCBtYXAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkTWFya2VyID0gZnVuY3Rpb24gKCBpLCBtYXAgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSBfZGF0YVsgJ3BsYWNlcycgXVtpXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGF0TG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggY3VySXRlbVsgJ2xhdCcgXSwgY3VySXRlbVsgJ2xuZycgXSApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9tYXJrZXJzWyBpIF0gPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjdXJMYXRMbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja2FibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGN1ckl0ZW1bICdpY29uJyBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoIGN1ckl0ZW1bICdzaXplJyBdWyAwIF0sIGN1ckl0ZW1bICdzaXplJyBdWyAxIF0gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDwgX21hcmtlcnMubGVuZ3RoOyBqKysgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9tYXJrZXJzWyBqIF0gIT09ICcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRzLmV4dGVuZCggX21hcmtlcnNbIGogXS5nZXRQb3NpdGlvbigpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF9tYXAuZml0Qm91bmRzKCBib3VuZHMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBpICogMzAwKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpO1xyXG4iXX0=
